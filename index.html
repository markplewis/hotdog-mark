<!doctype html>
<html lang="en-CA">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <title>The Real Hotdog Mark</title>

    <meta name="google-signin-client_id" content="109046679970862619640">
    <meta name="google-signin-scope" content="https://www.googleapis.com/auth/analytics.readonly">

    <meta property="og:url" content="http://therealhotdogmark.com/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="The Real Hotdog Mark">
    <meta property="og:description" content="I'm totally a hotdog! Look at me go!">
    <meta property="og:image" content="http://therealhotdogmark.com/images/share-photo.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <link href="https://fonts.googleapis.com/css?family=Chewy|Press+Start+2P|Gaegu:700" rel="stylesheet">
    <link href="css/normalize.css" type="text/css" rel="stylesheet">
    <link href="css/main.css" type="text/css" rel="stylesheet">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-24981697-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      gtag("js", new Date());
      gtag("config", "UA-24981697-3");
    </script> -->
  </head>
  <body>

    <div id="container" role="main">
      <h1>The Real Hotdog Mark</h1>
      <figure>
        <img src="images/hotdog-mark.gif" width="400" height="400" alt="Mark dancing while wearing a hotdog suit" />
        <figcaption>Look at me go!</figcaption>
      </figure>
      
      <!-- The Sign-in button. This will run `queryReports()` on success. -->
      <p class="g-signin2" data-onsuccess="queryReports"></p>

      <!-- The API response will be printed here. -->
      <textarea cols="80" rows="20" id="query-output"></textarea>
    </div>

    <script>
      // The following is based on this "JavaScript quickstart for web applications" guide:
      // https://developers.google.com/analytics/devguides/reporting/core/v4/quickstart/web-js
      var VIEW_ID = "177566365";

      // Query the API and print the results to the page
      // Documentation for the batchGet method:
      // https://developers.google.com/analytics/devguides/reporting/core/v4/rest/v4/reports/batchGet
      function queryReports() {
        gapi.client.request({
          path: '/v4/reports:batchGet',
          root: 'https://analyticsreporting.googleapis.com/',
          method: 'POST',
          body: {
            reportRequests: [
              {
                viewId: VIEW_ID,
                dateRanges: [
                  {
                    startDate: '2018-06-21',
                    endDate: 'today'
                  }
                ],
                metrics: [
                  {
                    expression: 'ga:users'
                  }
                ]
              }
            ]
          }
        }).then(displayResults, console.error.bind(console));
      }

      function displayResults(response) {
        var formattedJson = JSON.stringify(response.result, null, 2);
        document.getElementById('query-output').value = formattedJson;
      }
    </script>

    <!-- Load the JavaScript API client and sign-in library -->
    <script src="https://apis.google.com/js/client:platform.js"></script>

  </body>
</html>